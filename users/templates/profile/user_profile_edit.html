{% extends "user_base.html" %}
{% load static %}
{% block title %}
User Profile Edit
{% endblock %}
{% block styles %}

<link rel="stylesheet" href="{% static 'css/user/user_user_style.css' %}">
<link rel="stylesheet" href="{% static 'css/user/mobile_view.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

{% endblock %}
{% block content %}
<div class="container">
    <div class="row p-3  mb_p">
        <!-- <div class="col-xl-1 col-3">
            <a href=""><img src="{% static 'images/user/back-arrow.png' %}"></a>
        </div> -->
        <div class="col-xl-12 col-12">
            <h4><span class="page_title ms-2">Profile</span></h4>
        </div>
    </div>

    <div class="row p-3 ">
        <div class="col-md-3">
            {% include "profile/user_profile_sidebar.html" with active="edit_profile" %}
        </div>
        <div class="col-md-9">
            <div class="card p-5 card-body">
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-lg-2 col-sm-4">
                            {% if userprofiles.profile_img %}
                            <img class="rounded-circle" src="{{ userprofiles.profile_img.url}}" style="width: 100px; height: 100px;">
                            {% else %}
                            <img class="rounded-circle" src="{% static 'images/user/default_profile.jpg' %}" alt="Default Profile Image" style="width: 100px; height: 100px;">
                            {% endif %}
                            {% if form.profile_img.value %}
                            {% if not userprofiles.profile_img %}
                            <span class="text-danger error-message">{{form.profile_img.0}}</span>
                            {% endif %}
                            {% endif %}
                        </div>
                        <div class="col-lg-10 col-sm-8 pname pt-5">
                            <label for="fileInput" class="btn btn-dark user-btn bc_mv">
                                Upload
                                <input type="file" id="fileInput" style="display: none;" name="profile_img" class="form-control" accept="image/*" value="{% if request.POST.profile_img %}{{request.POST.profile_img}}{% else %}{{request.user.profile_img}}{% endif %}">
                            </label>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-sm-6 mb-2">
                            <label>User Name</label><br>
                            <input type="text" class="form-control" name="username"
                                value="{% if request.POST.username %}{{request.POST.username}}{% else %}{{request.user.username}}{% endif %}"
                                readonly>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <label>Email</label><br>
                            <input type="email" class="form-control"
                                value="{% if request.POST.email %}{{request.POST.email}}{% else %}{{request.user.email}}{% endif %}"
                                name="email">
                            {% if form.email %}
                            <span class="text-danger error-message">{{form.email.0}}<br></span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <label>First Name</label><br>
                            <input type="text" class="form-control"
                                value="{% if request.POST.first_name %}{{request.POST.first_name}}{% else %}{{request.user.first_name}}{% endif %}"
                                name="first_name">
                            {% if form.first_name %}
                            <span class="text-danger error-message">{{form.first_name.0}}<br></span>
                            {% endif %}
                        </div>
                        <div class="col-sm-6">
                            <label>Last Name</label><br>
                            <input type="text" class="form-control"
                                value="{% if request.POST.last_name %}{{request.POST.last_name}}{% else %}{{request.user.last_name}}{% endif %}"
                                name="last_name">
                            {% if form.last_name %}
                            <span class="text-danger error-message">{{form.last_name.0}}<br></span>
                            {% endif %}
                        </div>
                    </div>
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <div class="d-flex justify-content-end">

                <button type="button" class="btn btn-outline-dark me-2 px-4">Close</button>
                <button type="submit" class="btn btn-dark me-2 px-4">Save</button>

            </div>
        </div>
        <!-- <div class="col-10">
        </div>
        <div class="col-sm-6">
            <button type="reset" class="btn btn-outline-dark px-5">Close</button>
            <button type="submit" class="btn btn-outline-dark px-5">Save</button>
        </div> -->
    </div>
    </form>
</div>
{% endblock %}
{% block scripts %}
<script>
    $(function () {
        $('.form-control').on('keypress', function () {
            $(this).next('.error-message').remove();
        });
    });
</script>
{% endblock %}